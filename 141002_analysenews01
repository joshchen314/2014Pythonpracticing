'''
To take the news from Google News and save it as a txt file

This is first step. <using Python 3.4>
'''

import urllib.request
from html.parser import HTMLParser
data = urllib.request.urlopen('https://news.google.com.tw/nwshp?hl=zh-TW&tab=wn')
content = data.read().decode('utf_8')
data.close()
b=[]
class myparser(HTMLParser):
	def __init__(self):
		HTMLParser.__init__(self)
		self.isNumber = 0
		self.numbers = []
	def handle_data(self, data):
		'''
		if self.isNumber == 2 :
			print(data)
			b.append(data)
			#self.numbers.extend(data.split('、'))
			self.isNumber = 0
		'''
		if self.isNumber == 1 and self.getpos():
			print(data)
			b.append(data)
			#self.numbers.extend(data.split('、'))
			self.isNumber = 0
	def handle_starttag(self, tag, attrs):
		if tag == 'div' and attrs == [('class','esc-lead-snippet-wrapper')]:
			self.isNumber = 1
		'''
		if tag == 'span' and attrs == [('class','titletext')]:
			self.isNumber = 2
		'''

Parser = myparser()
Parser.feed(content)

file = open('newsnew.txt', 'w', encoding = 'UTF-8')
file.write(str(b))
file.close()
